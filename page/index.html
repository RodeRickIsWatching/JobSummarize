<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<a href="/test">
    跳转页面测试
</a>


<br/>

<label for="userName">账号：</label>
<input type="text" id="userName">

<br/>

<label for="password">密码：</label>
<input type="text" id="password">


<br/>


<button type="button" onclick="eventHandler('get')">GET请求，参数type = get</button>

<button type="button" onclick="eventHandler('post')">POST请求，参数type = post</button>

<!--<button type="button"></button>-->
<br/>

<span id="param"></span>

<script>



    let param = document.getElementById('param');
    function eventHandler(_type){
        let url = 'http://127.0.0.1:12306/index';
        let ajax = new XMLHttpRequest()
        switch (_type) {
            case 'get':
                let _url = url+'/getapi?type=get';
                console.log(_url)
                ajax.open('GET', _url, true)
                ajax.send()
                ajax.onreadystatechange = function(){
                    if(ajax.status === 200 && ajax.readyState === 4){
                        console.log('ok')
                        console.log(ajax.response)
                        param.innerText = ajax.response
                    }
                }
                break
            case 'post':
                ajax.open('POST', url+'/postapi', true)
                ajax.setRequestHeader('Content-type','application/json')
                ajax.send(JSON.stringify({type: 'post'}))
                ajax.onreadystatechange = function(){
                    if(ajax.status === 200 && ajax.readyState === 4){
                        console.log('ok')
                        console.log(ajax.response)
                        param.innerText = ajax.response
                    }
                }
                break
        }
    }


</script>
</body>
</html>
